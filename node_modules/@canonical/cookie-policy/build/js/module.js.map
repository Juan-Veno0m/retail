{"version":3,"file":"module.js","sources":["../../src/js/content.js","../../src/js/utils.js","../../src/js/notification.js","../../src/js/control.js","../../src/js/manager.js","../../src/js/main.js"],"sourcesContent":["export const controlsContent = [\n  {\n    id: 'essential',\n    showSwitcher: false,\n    content: {\n      default: {\n        title: 'Essential',\n        description:\n          \"Enables the site's core functionality, such as navigation, access to secure areas, video players and payments. The site cannot function properly without these cookies; they can only be disabled by changing your browser preferences.\",\n      },\n      zh: {\n        title: '必要性',\n        description:\n          '启用网站核心功能，例如导航，访问安全区域，视频播放器和支付。没有这些cookie网站不能正常工作；它们仅可通过修改浏览器偏好设置禁用。',\n      },\n      ja: {\n        title: 'エッセンシャル',\n        description:\n          '移動、保護されている情報へのアクセス、動画再生、支払など、サイトの基本的な機能が有効になります。これらのクッキーが有効になっていない（お使いのブラウザの設定を変更することによってクッキーが無効化されている）場合、サイトは正しく表示されません。',\n      },\n    },\n  },\n  {\n    id: 'performance',\n    showSwitcher: true,\n    content: {\n      default: {\n        title: 'Performance',\n        description:\n          'Collects information on site usage, for example, which pages are most frequently visited.',\n      },\n      zh: {\n        title: '表现性',\n        description: '网站使用信息收集，例如哪些网页被频繁访问。',\n      },\n      ja: {\n        title: 'パフォーマンス',\n        description:\n          'サイトの利用状況に関する情報を収集します。例として、どのページの訪問頻度が高いかのような情報です。',\n      },\n    },\n  },\n  {\n    id: 'functionality',\n    showSwitcher: true,\n    content: {\n      default: {\n        title: 'Functionality',\n        description:\n          'Recognises you when you return to our site. This enables us to personalise content, greet you by name, remember your preferences, and helps you share pages on social networks.',\n      },\n      zh: {\n        title: '功能性',\n        description:\n          '当你返回到我们网站时能识别您。这使得我们能个性化内容，欢迎您，记住您的偏好设置，以及帮助您分享网页到社交媒体。',\n      },\n      ja: {\n        title: '機能性',\n        description:\n          'お客様がサイトを再訪問したときに、お客様であることを認識します。この設定では、お客様に合わせたコンテンツの表示、お客様のお名前を用いたあいさつメッセージの表示、お客様の傾向の記録を当社が行えるようになります。また、お客様がソーシャルネットワークでページをシェアできるようになります。',\n      },\n    },\n  },\n];\n\nexport const content = {\n  default: {\n    notification: {\n      title: 'Your tracker settings',\n      body1:\n        'We use cookies and similar methods to recognise visitors and remember preferences. We also use them to measure campaign effectiveness and analyse site traffic.',\n      body2:\n        'By selecting ‘Accept‘, you consent to the use of these methods by us and trusted third parties.',\n      body3:\n        'For further details or to change your consent choices at any time see our <a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">cookie policy</a>.',\n      buttonAccept: 'Accept all and visit site',\n      buttonManage: 'Manage your tracker settings',\n    },\n    manager: {\n      title: 'Tracking choices',\n      body1:\n        'We use cookies to recognise visitors and remember your preferences.',\n      body2:\n        'They enhance user experience, personalise content and ads, provide social media features, measure campaign effectiveness, and analyse site traffic.',\n      body3:\n        'Select the types of trackers you consent to, both by us, and third parties.',\n      body4:\n        'Learn more at <a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">data privacy: cookie policy</a> - you can change your choices at any time from the footer of the site.',\n      acceptAll: 'Accept all',\n      acceptAllHelp: 'This will switch all toggles \"ON\".',\n      SavePreferences: 'Save preferences',\n    },\n  },\n\n  zh: {\n    notification: {\n      title: '您的追踪器设置',\n      body1:\n        '我们使用cookie和相似的方法来识别访问者和记住偏好设置。我们也用它们来衡量活动的效果和网站流量分析。',\n      body2: '选择”接受“，您同意我们和受信的第三方来使用这些方式。',\n      body3:\n        '更多内容或者随时地变更您的同意选择，请点击我们的 <a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">cookie策略</a>.',\n      buttonAccept: '接受全部和访问网站',\n      buttonManage: '管理您的追踪器设置',\n    },\n    manager: {\n      title: '追踪选项',\n      body1: '我们使用cookie来识别访问者和记住您的偏好设置',\n      body2:\n        '它们增强用户体验，使内容和广告个性化，提供社交媒体功能，衡量活动效果和网站流量分析。',\n      body3: '选择您同意授予我们和受信的第三方的追踪类型。',\n      body4:\n        '点击<a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">数据隐私：cookie策略</a>了解更多，您可以在网站底部随时更改您的选择。',\n      acceptAll: '接受全部',\n      acceptAllHelp: '这将把全部开关变为”开启“。',\n      SavePreferences: '保存偏好设置',\n    },\n  },\n\n  ja: {\n    notification: {\n      title: 'トラッキング機能の設定',\n      body1:\n        '当社は、当社のウェブサイトを訪問された方の識別や傾向の記録を行うために、クッキーおよび類似の手法を利用します。また、キャンペーンの効果の測定やサイトのトラフィックの分析にもクッキーを利用します。',\n      body2:\n        '「同意」を選択すると、当社および信頼できる第三者による上記の手法の利用に同意したものとみなされます。',\n      body3:\n        '詳細または同意の変更については、いつでも当社の<a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">クッキーに関するポリシー</a>をご覧になることができます。',\n      buttonAccept: 'すべて同意してサイトにアクセス',\n      buttonManage: 'トラッキング機能の設定の管理',\n    },\n    manager: {\n      title: 'トラッキング機能の選択',\n      body1:\n        '当社は、当社のウェブサイトを訪問された方の識別や傾向の記録を行うために、クッキーを利用します。',\n      body2:\n        'クッキーは、お客様の利便性の向上、お客様に合わせたコンテンツや広告の表示、ソーシャルメディア機能の提供、キャンペーンの効果の測定、サイトのトラフィックの分析に役立ちます。',\n      body3:\n        '当社および第三者によるトラッキング機能のタイプから、お客様が同意されるものをお選びください。',\n      body4:\n        '詳細は、<a href=\"https://ubuntu.com/legal/data-privacy?cp=hide#cookies\">データプライバシー：クッキーに関するポリシー</a>をご覧ください。お客様が選んだ設定は、本サイトの下部からいつでも変更できます。',\n      acceptAll: 'すべて同意',\n      acceptAllHelp: '同意されるとすべての設定が「ON」に切り替わります。',\n      SavePreferences: '設定を保存',\n    },\n  },\n};\n","import { content } from './content.js';\n\nexport const setCookie = (value) => {\n  const d = new Date();\n  d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);\n  const expires = 'expires=' + d.toUTCString();\n  const samesite = 'samesite=lax;';\n  const path = 'path=/;';\n  document.cookie =\n    '_cookies_accepted=' + value + '; ' + expires + '; ' + samesite + path;\n  if (enabledTracking(value)) {\n    pushPageview();\n  }\n};\n\nexport const getCookie = () => {\n  const toMatch = '_cookies_accepted=';\n  const splitArray = document.cookie.split(';');\n  let cookieValue = '';\n  let currentCookieValue = '';\n  for (let i = 0; i < splitArray.length; i++) {\n    let cookie = splitArray[i];\n    while (cookie.charAt(0) == ' ') {\n      cookie = cookie.substring(1);\n    }\n    currentCookieValue = cookie.substring(toMatch.length, cookie.length);\n    if (cookie.indexOf(toMatch) === 0 && currentCookieValue !== 'true') {\n      cookieValue = currentCookieValue;\n    }\n  }\n  return cookieValue;\n};\n\nexport const preferenceNotSelected = () => {\n  const cookieValue = getCookie('_cookies_accepted');\n  // Skip a value of \"true\" to override old existing cookies\n  if (cookieValue && cookieValue != 'true') {\n    return false;\n  } else {\n    return true;\n  }\n};\n\nexport const hideSpecified = () => {\n  const urlParams = new URLSearchParams(window.location.search);\n  const cpQuery = urlParams.get('cp');\n\n  if (cpQuery === 'hide') {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const getContent = (language) => {\n  if (content[language]) {\n    return content[language];\n  } else {\n    return content['default'];\n  }\n};\n\nexport const getControlsContent = (details, language) => {\n  if (details.content[language]) {\n    return details.content[language];\n  } else {\n    return details.content['default'];\n  }\n};\n\nconst pushPageview = () => {\n  if (typeof dataLayer === 'object') {\n    dataLayer.push({ event: 'pageview' });\n  }\n};\n\nconst enabledTracking = (selectedPreference) => {\n  if (selectedPreference == 'all' || selectedPreference == 'performance') {\n    return true;\n  } else {\n    return false;\n  }\n};\n","import { setCookie, getContent } from './utils.js';\n\nexport class Notification {\n  constructor(container, renderManager, destroyComponent) {\n    this.container = container;\n    this.renderManager = renderManager;\n    this.destroyComponent = destroyComponent;\n  }\n\n  getNotificationMarkup(language) {\n    const notificationContent = getContent(language);\n    const notification = `\n      <div class=\"p-modal\" id=\"modal\">\n        <div class=\"p-modal__dialog\" role=\"dialog\" aria-labelledby=\"cookie-policy-title\" aria-describedby=\"cookie-policy-content\">\n        <header class=\"p-modal__header\">\n          <h2 class=\"p-modal__title\" id=\"cookie-policy-title\">${notificationContent.notification.title}</h2>\n        </header>\n        <div id=\"cookie-policy-content\">\n          <p>${notificationContent.notification.body1}</p>\n          <p>${notificationContent.notification.body2}</p>\n          <p>${notificationContent.notification.body3}</p>\n          <p class=\"u-no-margin--bottom\">\n            <button class=\"p-button--positive js-close\" id=\"cookie-policy-button-accept\">${notificationContent.notification.buttonAccept}</button>\n            <button class=\"p-button--neutral u-no-margin--bottom js-manage\">${notificationContent.notification.buttonManage}</button>\n          </p>\n        </div>\n      </div>`;\n\n    return notification;\n  }\n\n  render(language) {\n    this.container.innerHTML = this.getNotificationMarkup(language);\n    this.initaliseListeners();\n  }\n\n  initaliseListeners() {\n    this.container.querySelector('.js-close').addEventListener('click', (e) => {\n      setCookie('all');\n      this.destroyComponent();\n    });\n    this.container\n      .querySelector('.js-manage')\n      .addEventListener('click', (e) => {\n        this.renderManager();\n      });\n  }\n}\n","import { getControlsContent } from './utils.js';\n\nexport class Control {\n  constructor(details, container, language) {\n    this.language = language;\n    this.id = details.id;\n    this.title = getControlsContent(details, language).title;\n    this.description = getControlsContent(details, language).description;\n    this.showSwitcher = details.showSwitcher;\n    this.container = container;\n    this.element;\n\n    // Rendering off the bat here as this is a dumb component.\n    // It saves creating a variable and calling .render() on it.\n    this.render();\n  }\n\n  render() {\n    const control = document.createElement('div');\n    control.classList.add('u-sv3');\n    control.innerHTML = `\n      ${\n        this.showSwitcher\n          ? `<label class=\"u-float-right\">\n        <input type=\"checkbox\" class=\"p-switch js-${this.id}-switch\">\n        <div class=\"p-switch__slider\"></div>\n      </label>`\n          : ''\n      }\n      <h4>${this.title}</h4>\n      <p>${this.description}</p>`;\n    this.container.appendChild(control);\n    this.element = control.querySelector(`.js-${this.id}-switch`);\n  }\n\n  isChecked() {\n    return this.element ? this.element.checked : true;\n  }\n\n  getId() {\n    return this.id;\n  }\n}\n","import { setCookie, getContent } from './utils.js';\nimport { Control } from './control.js';\nimport { controlsContent } from './content.js';\n\nexport class Manager {\n  constructor(container, destroyComponent) {\n    this.container = container;\n    this.controlsStore = [];\n    this.destroyComponent = destroyComponent;\n  }\n\n  getManagerMarkup(language) {\n    const managerContent = getContent(language).manager;\n    const manager = `\n    <div class=\"p-modal\" id=\"modal\">\n    <div class=\"p-modal__dialog\" role=\"dialog\" aria-labelledby=\"modal-title\" aria-describedby=\"modal-description\">\n      <header class=\"p-modal__header\">\n        <h2 class=\"p-modal__title\" id=\"modal-title\">${managerContent.title}</h2>\n      </header>\n      <p id=\"modal-description\">${managerContent.body1}</p>\n      <p>${managerContent.body2}</p>\n      <p>${managerContent.body3}</p>\n      <p>${managerContent.body4}</p>\n      <p><button class=\"p-button--positive u-no-margin--bottom js-close\">${managerContent.acceptAll}</button></p>\n      <p>${managerContent.acceptAllHelp}</p>\n      <hr />\n      <div class=\"controls\"></div>\n      <button class=\"p-button--neutral js-save-preferences\">${managerContent.SavePreferences}</button>\n    </div>\n  </div>`;\n\n    return manager;\n  }\n\n  render(language) {\n    this.container.innerHTML = this.getManagerMarkup(language);\n    const controlsContainer = this.container.querySelector('.controls');\n    controlsContent.forEach((controlDetails) => {\n      const control = new Control(controlDetails, controlsContainer, language);\n      this.controlsStore.push(control);\n    });\n    this.initaliseListeners();\n  }\n\n  initaliseListeners() {\n    this.container.querySelector('.js-close').addEventListener('click', () => {\n      setCookie('all');\n      this.destroyComponent();\n    });\n\n    this.container\n      .querySelector('.js-save-preferences')\n      .addEventListener('click', () => {\n        this.savePreferences();\n        this.destroyComponent();\n      });\n  }\n\n  savePreferences() {\n    const checkedControls = this.controlsStore.filter((control) =>\n      control.isChecked()\n    );\n\n    if (this.controlsStore.length === checkedControls.length) {\n      setCookie('all');\n    } else {\n      this.controlsStore.forEach((control) => {\n        if (control.isChecked()) {\n          setCookie(control.getId());\n        }\n      });\n    }\n  }\n}\n","import { Notification } from './notification.js';\nimport { Manager } from './manager.js';\nimport { preferenceNotSelected, hideSpecified } from './utils.js';\n\nexport const cookiePolicy = (callback = null) => {\n  let cookiePolicyContainer = null;\n  let language = document.documentElement.lang;\n\n  const renderNotification = function (e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (cookiePolicyContainer === null) {\n      cookiePolicyContainer = document.createElement('dialog');\n      cookiePolicyContainer.classList.add('cookie-policy');\n      cookiePolicyContainer.setAttribute('open', true);\n      document.body.appendChild(cookiePolicyContainer);\n      const notifiation = new Notification(\n        cookiePolicyContainer,\n        renderManager,\n        close\n      );\n      notifiation.render(language);\n      document.getElementById('cookie-policy-button-accept').focus();\n    }\n  };\n\n  const renderManager = function () {\n    const manager = new Manager(cookiePolicyContainer, close);\n    manager.render(language);\n  };\n\n  const close = function () {\n    if (typeof callback === 'function') {\n      callback();\n    }\n    document.body.removeChild(cookiePolicyContainer);\n    cookiePolicyContainer = null;\n  };\n\n  const init = function () {\n    const revokeButton = document.querySelector('.js-revoke-cookie-manager');\n    if (revokeButton) {\n      revokeButton.addEventListener('click', renderNotification);\n    }\n\n    if (preferenceNotSelected() && !hideSpecified()) {\n      renderNotification();\n    }\n  };\n\n  document.addEventListener('DOMContentLoaded', init, false);\n};\n"],"names":["controlsContent","id","showSwitcher","content","default","title","description","zh","ja","notification","body1","body2","body3","buttonAccept","buttonManage","manager","body4","acceptAll","acceptAllHelp","SavePreferences","setCookie","value","d","Date","setTime","getTime","expires","toUTCString","samesite","path","document","cookie","enabledTracking","pushPageview","getCookie","toMatch","splitArray","split","cookieValue","currentCookieValue","i","length","charAt","substring","indexOf","preferenceNotSelected","hideSpecified","urlParams","URLSearchParams","window","location","search","cpQuery","get","getContent","language","getControlsContent","details","dataLayer","push","event","selectedPreference","Notification","container","renderManager","destroyComponent","notificationContent","innerHTML","getNotificationMarkup","initaliseListeners","querySelector","addEventListener","e","Control","element","render","control","createElement","classList","add","appendChild","checked","Manager","controlsStore","managerContent","getManagerMarkup","controlsContainer","forEach","controlDetails","savePreferences","checkedControls","filter","isChecked","getId","cookiePolicy","callback","cookiePolicyContainer","documentElement","lang","renderNotification","preventDefault","setAttribute","body","notifiation","close","getElementById","focus","removeChild","init","revokeButton"],"mappings":"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"}
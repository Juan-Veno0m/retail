var canonicalLatestNews=function(e){"use strict";function r(){var e=document.querySelector("[data-js='latest-news']");e&&e.classList.remove("u-hide")}function u(e){e=new Date(e);return e.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getFullYear()}function n(e,t,a){var r,i=m(t),n=i.querySelector(".article-time"),l=i.querySelector(".article-link"),d=i.querySelector(".article-title"),o=i.querySelector(".article-image"),c=i.querySelector(".article-author"),s="",t=document.createElement("a");return a.hostname&&(s="https://"+a.hostname),e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]&&e._embedded["wp:featuredmedia"][0].media_details&&e._embedded["wp:featuredmedia"][0].media_details.width&&e._embedded["wp:featuredmedia"][0].media_details.height&&(r={url:(r=e._embedded["wp:featuredmedia"][0]).source_url,alt:r.alt_text,width:r.media_details.width,height:r.media_details.height}),c&&(c.innerHTML=e.author.name),n&&(n.setAttribute("datetime",e.date),n.innerText=u(e.date)),l&&(l.href=s+"/blog/"+e.slug,a.gtmEventLabel&&(l.onclick=function(){dataLayer.push({event:"GAEvent",eventCategory:"blog",eventAction:a.gtmEventLabel+" news link",eventLabel:e.slug})})),d&&(d.innerHTML=e.title.rendered),o&&r&&a.linkImage&&(t.href=s+"/blog/"+e.slug,o.appendChild(t)),o&&r&&((s=document.createElement("img")).setAttribute("src",r.url),s.setAttribute("alt",r.alt),s.setAttribute("width",r.width),s.setAttribute("height",r.height),(a.linkImage?t:o).appendChild(s)),i}function m(e){var t,a=document.querySelector(e);if("content"in a)t=document.importNode(a.content,!0);else{t=document.createDocumentFragment();for(var r=0;r<a.childNodes.length;r++)t.appendChild(a.childNodes[r].cloneNode(!0))}return t}function i(i){return function(e){var t=document.querySelector(i.articlesContainerSelector);if(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild);var a,r=JSON.parse(e.target.responseText);"spotlightContainerSelector"in i&&((a=document.querySelector(i.spotlightContainerSelector))?(e=r.latest_pinned_articles[0])&&a.appendChild(n(e,i.spotlightTemplateSelector,i)):console.warn("latest-news: No spotlight container found")),r.latest_articles&&r.latest_articles.forEach(function(e){t.appendChild(n(e,i.articleTemplateSelector,i))})}else console.warn("latest-news: No articles container found")}}function t(e){var t="https://ubuntu.com/blog/latest-news",a=[];r(),e.limit&&a.push("limit="+e.limit),e.tagId&&a.push("tag-id="+e.tagId),e.groupId&&a.push("group-id="+e.groupId),a.length&&(t+="?"+a.join("&"));a=new XMLHttpRequest;a.addEventListener("load",i(e)),a.open("GET",t),a.send()}return void 0===window.fetchLatestNews&&(window.fetchLatestNews=t),e.articleDiv=n,e.fetchLatestNews=t,e.formatDate=u,e.getTemplate=m,e.latestArticlesCallback=i,e.revealSection=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=latest-news.js.map
